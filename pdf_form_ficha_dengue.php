<?php

function inverteData($data)
{
	if (count(explode('/', $data)) > 1) {
		return implode('-', array_reverse(explode('/', $data)));
	} elseif (count(explode('-', $data)) > 1) {
		return implode('/', array_reverse(explode('-', $data)));
	}
}

require_once 'fpdf/fpdf.php';
require_once 'fpdi/fpdi.php';
require_once 'tsul_ssl.php';

$id = $_GET['id'];

include 'conexao.php';
$sql = "SELECT * FROM ficha_dengue a inner join pessoas b on a.pessoa_id = b.pessoa_id WHERE ficha_dengue_id = $id";
$result = pg_query($sql) or die($sql);
$row = pg_fetch_object($result);

$pdf = new FPDF('P', 'pt', 'A4');
$pdf->AddPage();
$pdf->Image('formularios/denguechik1.png', 0, 0, $pdf->GetPageWidth(), $pdf->GetPageHeight());
$pdf->SetFont('Arial', '', 9);
$pdf->Text(350, 180, $row->agdo);
$pdf->SetFont('Arial', '', 12);
if ($row->cid == 1) {
	$pdf->Text(390, 190, 'X');
} elseif ($row->cid == 2) {
	$pdf->Text(415, 190, 'X');
}
$pdf->SetFont('Arial', '', 9);
$pdf->Text(450, 190, $row->data_notificacao[0]);
$pdf->Text(465, 190, $row->data_notificacao[1]);
$pdf->Text(480, 190, $row->data_notificacao[3]);
$pdf->Text(495, 190, $row->data_notificacao[4]);
$pdf->Text(510, 190, $row->data_notificacao[6]);
$pdf->Text(525, 190, $row->data_notificacao[7]);
$pdf->Text(540, 190, $row->data_notificacao[8]);
$pdf->Text(555, 190, $row->data_notificacao[9]);
$pdf->Text(60, 220, $row->estado[0]);
$pdf->Text(70, 220, $row->estado[1]);
$pdf->Text(100, 220, $row->municipio);
$pdf->Text(480, 220, $row->ibge[0]);
$pdf->Text(495, 220, $row->ibge[1]);
$pdf->Text(510, 220, $row->ibge[2]);
$pdf->Text(525, 220, $row->ibge[3]);
$pdf->Text(540, 220, $row->ibge[4]);
$pdf->Text(555, 220, $row->ibge[5]);
$pdf->Text(60, 248, $row->unidade_saude);
$pdf->Text(345, 248, $row->codigo_unidade[0]);
$pdf->Text(357, 248, $row->codigo_unidade[1]);
$pdf->Text(372, 248, $row->codigo_unidade[2]);
$pdf->Text(388, 248, $row->codigo_unidade[3]);
$pdf->Text(403, 248, $row->codigo_unidade[4]);
$pdf->Text(417, 248, $row->codigo_unidade[5]);
$pdf->Text(432, 248, $row->codigo_unidade[6]);
$pdf->Text(450, 248, $row->data_primeiro_sintomas[0]);
$pdf->Text(465, 248, $row->data_primeiro_sintomas[1]);
$pdf->Text(480, 248, $row->data_primeiro_sintomas[3]);
$pdf->Text(495, 248, $row->data_primeiro_sintomas[4]);
$pdf->Text(510, 248, $row->data_primeiro_sintomas[6]);
$pdf->Text(525, 248, $row->data_primeiro_sintomas[7]);
$pdf->Text(540, 248, $row->data_primeiro_sintomas[8]);
$pdf->Text(555, 248, $row->data_primeiro_sintomas[9]);
$pdf->Text(60, 279, ts_decodifica($row->nome));
$pdf->Text(450, 279, inverteData($row->dt_nasc)[0]);
$pdf->Text(465, 279, inverteData($row->dt_nasc)[1]);
$pdf->Text(480, 279, inverteData($row->dt_nasc)[3]);
$pdf->Text(495, 279, inverteData($row->dt_nasc)[4]);
$pdf->Text(510, 279, inverteData($row->dt_nasc)[6]);
$pdf->Text(525, 279, inverteData($row->dt_nasc)[7]);
$pdf->Text(540, 279, inverteData($row->dt_nasc)[8]);
$pdf->Text(555, 279, inverteData($row->dt_nasc)[9]);
$pdf->Text(231, 294, $row->sexo);
$pdf->Text(426, 294, $row->gestante);
$pdf->Text(551, 294, $row->raca);
$pdf->Text(551, 323, $row->escolaridade);
$pdf->Text(55, 370, $row->num_carteira_convenio[0]);
$pdf->Text(65, 370, $row->num_carteira_convenio[1]);
$pdf->Text(76, 370, $row->num_carteira_convenio[2]);
$pdf->Text(87, 370, $row->num_carteira_convenio[3]);
$pdf->Text(99, 370, $row->num_carteira_convenio[4]);
$pdf->Text(111, 370, $row->num_carteira_convenio[5]);
$pdf->Text(123, 370, $row->num_carteira_convenio[6]);
$pdf->Text(135, 370, $row->num_carteira_convenio[7]);
$pdf->Text(148, 370, $row->num_carteira_convenio[8]);
$pdf->Text(159, 370, $row->num_carteira_convenio[9]);
$pdf->Text(170, 370, $row->num_carteira_convenio[10]);
$pdf->Text(184, 370, $row->num_carteira_convenio[11]);
$pdf->Text(195, 370, $row->num_carteira_convenio[12]);
$pdf->Text(207, 370, $row->num_carteira_convenio[13]);
$pdf->Text(219, 370, $row->num_carteira_convenio[14]);
$pdf->Text(250, 370, ts_decodifica($row->nome_mae));
$pdf->Text(55, 398, $row->estado[0]);
$pdf->Text(70, 398, $row->estado[1]);
$pdf->Text(100, 398, $row->cidade);
$pdf->Text(60, 423, $row->bairro);
$pdf->Text(200, 423, $row->endereco);
$pdf->Text(55, 447, $row->numero);
$pdf->Text(110, 447, $row->complemento);
$pdf->Text(460, 475, $row->cep[0]);
$pdf->Text(471, 475, $row->cep[1]);
$pdf->Text(487, 475, $row->cep[2]);
$pdf->Text(503, 475, $row->cep[3]);
$pdf->Text(516, 475, $row->cep[4]);
$pdf->Text(530, 475, $row->cep[6]);
$pdf->Text(543, 475, $row->cep[7]);
$pdf->Text(557, 475, $row->cep[8]);
$pdf->Text(55, 500, $row->telefone[0]);
$pdf->Text(70, 500, $row->telefone[1]);
$pdf->Text(85, 500, $row->telefone[3]);
$pdf->Text(100, 500, $row->telefone[4]);
$pdf->Text(115, 500, $row->telefone[5]);
$pdf->Text(130, 500, $row->telefone[6]);
$pdf->Text(145, 500, $row->telefone[7]);
$pdf->Text(160, 500, $row->telefone[8]);
$pdf->Text(175, 500, $row->telefone[9]);
$pdf->Text(190, 500, $row->telefone[10]);
$pdf->Text(205, 500, $row->telefone[11]);
$pdf->Text(335, 487, $row->zona);
$pdf->Text(65, 548, $row->data_investigacao[0]);
$pdf->Text(80, 548, $row->data_investigacao[1]);
$pdf->Text(95, 548, $row->data_investigacao[3]);
$pdf->Text(110, 548, $row->data_investigacao[4]);
$pdf->Text(125, 548, $row->data_investigacao[6]);
$pdf->Text(140, 548, $row->data_investigacao[7]);
$pdf->Text(155, 548, $row->data_investigacao[8]);
$pdf->Text(170, 548, $row->data_investigacao[9]);
$pdf->Text(185, 548, $row->ocupacao);
$pdf->Text(60, 580, $row->febre);
$pdf->Text(105, 580, $row->cefaleia);
$pdf->Text(160, 580, $row->vomito);
$pdf->Text(220, 580, $row->dor_costas);
$pdf->Text(300, 579, $row->artrite);
$pdf->Text(390, 578, $row->petequia);
$pdf->Text(475, 577, $row->prova_positiva);
$pdf->Text(60, 595, $row->mialgia);
$pdf->Text(105, 595, $row->exantema);
$pdf->Text(160, 595, $row->nauseas);
$pdf->Text(220, 595, $row->conjuntivite);
$pdf->Text(300, 595, $row->artralgia_intensa);
$pdf->Text(390, 595, $row->leucopenia);
$pdf->Text(475, 595, $row->dor_retroorbital);
$pdf->Text(60, 630, $row->diabetes);
$pdf->Text(195, 630, $row->hepatopatias);
$pdf->Text(315, 630, $row->hipertensao_arterial);
$pdf->Text(427, 630, $row->doencas_ai);
$pdf->Text(60, 647, $row->doencas_hematologicas);
$pdf->Text(195, 647, $row->doenca_rc);
$pdf->Text(315, 647, $row->doenca_ap);
$pdf->Text(60, 697, $row->data_coleta_s1[0]);
$pdf->Text(75, 697, $row->data_coleta_s1[1]);
$pdf->Text(90, 697, $row->data_coleta_s1[3]);
$pdf->Text(105, 697, $row->data_coleta_s1[4]);
$pdf->Text(120, 697, $row->data_coleta_s1[6]);
$pdf->Text(135, 697, $row->data_coleta_s1[7]);
$pdf->Text(150, 697, $row->data_coleta_s1[8]);
$pdf->Text(165, 697, $row->data_coleta_s1[9]);
$pdf->Text(185, 697, $row->data_coleta_s2[0]);
$pdf->Text(200, 697, $row->data_coleta_s2[1]);
$pdf->Text(215, 697, $row->data_coleta_s2[3]);
$pdf->Text(230, 697, $row->data_coleta_s2[4]);
$pdf->Text(245, 697, $row->data_coleta_s2[6]);
$pdf->Text(260, 697, $row->data_coleta_s2[7]);
$pdf->Text(275, 697, $row->data_coleta_s2[8]);
$pdf->Text(290, 697, $row->data_coleta_s2[9]);
$pdf->Text(310, 697, $row->data_prnt[0]);
$pdf->Text(325, 697, $row->data_prnt[1]);
$pdf->Text(340, 697, $row->data_prnt[3]);
$pdf->Text(355, 697, $row->data_prnt[4]);
$pdf->Text(370, 697, $row->data_prnt[6]);
$pdf->Text(385, 697, $row->data_prnt[7]);
$pdf->Text(400, 697, $row->data_prnt[8]);
$pdf->Text(415, 697, $row->data_prnt[9]);
$pdf->Text(465, 675, $row->resultado_s1);
$pdf->Text(495, 675, $row->resultado_s2);
$pdf->Text(535, 675, $row->resultado_prnt);
$pdf->Text(65, 742, $row->data_coleta_dengue[0]);
$pdf->Text(80, 742, $row->data_coleta_dengue[1]);
$pdf->Text(95, 742, $row->data_coleta_dengue[3]);
$pdf->Text(110, 742, $row->data_coleta_dengue[4]);
$pdf->Text(125, 742, $row->data_coleta_dengue[6]);
$pdf->Text(140, 742, $row->data_coleta_dengue[7]);
$pdf->Text(155, 742, $row->data_coleta_dengue[8]);
$pdf->Text(170, 742, $row->data_coleta_dengue[9]);
$pdf->Text(296, 722, $row->resultado_dengue);
$pdf->Text(325, 742, $row->data_ns1[0]);
$pdf->Text(340, 742, $row->data_ns1[1]);
$pdf->Text(355, 742, $row->data_ns1[3]);
$pdf->Text(370, 742, $row->data_ns1[4]);
$pdf->Text(385, 742, $row->data_ns1[6]);
$pdf->Text(400, 742, $row->data_ns1[7]);
$pdf->Text(415, 742, $row->data_ns1[8]);
$pdf->Text(430, 742, $row->data_ns1[9]);
$pdf->Text(550, 720, $row->resultado_ns1);
$pdf->Text(58, 777, $row->data_isolamento[0]);
$pdf->Text(73, 777, $row->data_isolamento[1]);
$pdf->Text(88, 777, $row->data_isolamento[3]);
$pdf->Text(103, 777, $row->data_isolamento[4]);
$pdf->Text(118, 777, $row->data_isolamento[6]);
$pdf->Text(133, 777, $row->data_isolamento[7]);
$pdf->Text(148, 777, $row->data_isolamento[8]);
$pdf->Text(163, 777, $row->data_isolamento[9]);
$pdf->Text(285, 760, $row->resultado_isomanento);
$pdf->Text(325, 777, $row->data_rtpcr[0]);
$pdf->Text(340, 777, $row->data_rtpcr[1]);
$pdf->Text(355, 777, $row->data_rtpcr[3]);
$pdf->Text(370, 777, $row->data_rtpcr[4]);
$pdf->Text(385, 777, $row->data_rtpcr[6]);
$pdf->Text(400, 777, $row->data_rtpcr[7]);
$pdf->Text(415, 777, $row->data_rtpcr[8]);
$pdf->Text(430, 777, $row->data_rtpcr[9]);
$pdf->Text(550, 755, $row->resultado_rtpcr);
$pdf->Text(150, 790, $row->sorotipo);
$pdf->Text(285, 790, $row->histopatologia);
$pdf->Text(430, 790, $row->imunohistoquimica);
$pdf->AddPage();
$pdf->Image('formularios/denguechik2.png', 0, 0, $pdf->GetPageWidth(), $pdf->GetPageHeight());
$pdf->SetFont('Arial', '', 9);
$pdf->Text(166, 57, $row->hospitalizacao);
$pdf->Text(195, 60, $row->data_internacao[0]);
$pdf->Text(210, 60, $row->data_internacao[1]);
$pdf->Text(225, 60, $row->data_internacao[3]);
$pdf->Text(240, 60, $row->data_internacao[4]);
$pdf->Text(255, 60, $row->data_internacao[6]);
$pdf->Text(270, 60, $row->data_internacao[7]);
$pdf->Text(285, 60, $row->data_internacao[8]);
$pdf->Text(300, 60, $row->data_internacao[9]);
$pdf->Text(316, 60, $row->uf_internacao[0]);
$pdf->Text(327, 60, $row->uf_internacao[1]);
$pdf->Text(350, 60, $row->municipio_internacao);
$pdf->Text(60, 92, $row->nome_hospital);
$pdf->Text(330, 92, $row->codigo_hospital[0]);
$pdf->Text(348, 92, $row->codigo_hospital[1]);
$pdf->Text(360, 92, $row->codigo_hospital[2]);
$pdf->Text(376, 92, $row->codigo_hospital[3]);
$pdf->Text(390, 92, $row->codigo_hospital[4]);
$pdf->Text(405, 92, $row->codigo_hospital[5]);
$pdf->Text(420, 92, $row->codigo_hospital[6]);
$pdf->Text(440, 93, $row->telefone_internacao[0]);
$pdf->Text(452, 93, $row->telefone_internacao[1]);
$pdf->Text(463, 93, $row->telefone_internacao[3]);
$pdf->Text(473, 93, $row->telefone_internacao[4]);
$pdf->Text(488, 93, $row->telefone_internacao[5]);
$pdf->Text(498, 93, $row->telefone_internacao[6]);
$pdf->Text(510, 93, $row->telefone_internacao[7]);
$pdf->Text(520, 93, $row->telefone_internacao[8]);
$pdf->Text(532, 93, $row->telefone_internacao[9]);
$pdf->Text(543, 93, $row->telefone_internacao[10]);
$pdf->Text(555, 93, $row->telefone_internacao[11]);
$pdf->Text(300, 130, $row->autoctone);
$pdf->Text(343, 135, $row->uf_caso[0]);
$pdf->Text(355, 135, $row->uf_caso[1]);
$pdf->Text(400, 135, $row->pais_caso);
$pdf->Text(60, 163, $row->municipio_caso);
$pdf->Text(205, 163, $row->ibge_caso[0]);
$pdf->Text(217, 163, $row->ibge_caso[1]);
$pdf->Text(235, 163, $row->ibge_caso[2]);
$pdf->Text(248, 163, $row->ibge_caso[3]);
$pdf->Text(265, 163, $row->ibge_caso[4]);
$pdf->Text(280, 163, $row->ibge_caso[5]);
$pdf->Text(300, 163, $row->distrito_caso);
$pdf->Text(450, 163, $row->bairro_caso);
$pdf->Text(277, 180, $row->classificacao);
$pdf->Text(430, 185, $row->criteriocd);
$pdf->Text(470, 195, $row->apresentacao_clinica);
$pdf->Text(165, 220, $row->evolucao_caso);
$pdf->Text(315, 243, $row->data_obito[0]);
$pdf->Text(330, 243, $row->data_obito[1]);
$pdf->Text(345, 243, $row->data_obito[3]);
$pdf->Text(358, 243, $row->data_obito[4]);
$pdf->Text(372, 243, $row->data_obito[6]);
$pdf->Text(385, 243, $row->data_obito[7]);
$pdf->Text(400, 243, $row->data_obito[8]);
$pdf->Text(415, 243, $row->data_obito[9]);
$pdf->Text(445, 243, $row->data_encerramento[0]);
$pdf->Text(463, 243, $row->data_encerramento[1]);
$pdf->Text(477, 243, $row->data_encerramento[3]);
$pdf->Text(490, 243, $row->data_encerramento[4]);
$pdf->Text(505, 243, $row->data_encerramento[6]);
$pdf->Text(520, 243, $row->data_encerramento[7]);
$pdf->Text(535, 243, $row->data_encerramento[8]);
$pdf->Text(550, 243, $row->data_encerramento[9]);
$pdf->Text(60, 305, $row->hipotensao);
$pdf->Text(60, 320, $row->abrupta_plaquetas);
$pdf->Text(215, 275, $row->vomito_persistentes);
$pdf->Text(215, 290, $row->dor_abdominal);
$pdf->Text(215, 306, $row->letargia_irritabilidade);
$pdf->Text(215, 322, $row->sangramento_mucosa);
$pdf->Text(348, 275, $row->hematocrito);
$pdf->Text(348, 294, $row->hepatomegalia2);
$pdf->Text(348, 310, $row->acumulo_liquidos);
$pdf->Text(460, 323, $row->data_sinais_alarme[0]);
$pdf->Text(475, 323, $row->data_sinais_alarme[1]);
$pdf->Text(490, 323, $row->data_sinais_alarme[3]);
$pdf->Text(505, 323, $row->data_sinais_alarme[4]);
$pdf->Text(520, 323, $row->data_sinais_alarme[6]);
$pdf->Text(533, 323, $row->data_sinais_alarme[7]);
$pdf->Text(548, 323, $row->data_sinais_alarme[8]);
$pdf->Text(560, 323, $row->data_sinais_alarme[9]);
$pdf->Text(60, 372, $row->pulso_indetectavel);
$pdf->Text(60, 390, $row->paconvergente);
$pdf->Text(60, 405, $row->tempo_capilar);
$pdf->Text(60, 420, $row->acumulo_liquidos_repiratoria);
$pdf->Text(203, 375, $row->taquicardia);
$pdf->Text(203, 389, $row->extremidades_frias);
$pdf->Text(203, 405, $row->hipotensao_tardia);
$pdf->Text(335, 356, $row->hematemese);
$pdf->Text(335, 375, $row->melena);
$pdf->Text(430, 356, $row->metrorragia);
$pdf->Text(430, 375, $row->sangramentosnc);
$pdf->Text(335, 408, $row->ast_alt);
$pdf->Text(430, 408, $row->miocardite);
$pdf->Text(490, 406, $row->alteracao_consciencia);
$pdf->Text(335, 425, $row->outros_orgaos);
$pdf->Text(460, 427, $row->especificar_orgao);
$pdf->Text(60, 470, $row->data_sinais_gravidade[0]);
$pdf->Text(75, 470, $row->data_sinais_gravidade[1]);
$pdf->Text(90, 470, $row->data_sinais_gravidade[3]);
$pdf->Text(105, 470, $row->data_sinais_gravidade[4]);
$pdf->Text(120, 470, $row->data_sinais_gravidade[6]);
$pdf->Text(133, 470, $row->data_sinais_gravidade[7]);
$pdf->Text(148, 470, $row->data_sinais_gravidade[8]);
$pdf->Text(160, 470, $row->data_sinais_gravidade[9]);
$pdf->SetXY(35, 520);
$pdf->SetFont('Arial', '', 12);
$pdf->MultiCell(520, 23, utf8_decode($row->observacoes_adicionais), 0, 'L');
$pdf->SetFont('Arial', '', 9);
$pdf->Text(65, 758, $row->municipio_unidade_observacao);
$pdf->Text(465, 758, $row->codigo_unidade_observacao[0]);
$pdf->Text(478, 758, $row->codigo_unidade_observacao[1]);
$pdf->Text(493, 758, $row->codigo_unidade_observacao[2]);
$pdf->Text(508, 758, $row->codigo_unidade_observacao[3]);
$pdf->Text(523, 758, $row->codigo_unidade_observacao[4]);
$pdf->Text(537, 758, $row->codigo_unidade_observacao[5]);
$pdf->Text(550, 758, $row->codigo_unidade_observacao[6]);
$pdf->Text(65, 790, $row->nome_investigador);
$pdf->Text(260, 790, $row->funcao_investigador);
$pdf->Output();
